<template><div><h2>Dipendenti</h2><n-space vertical><n-form @submit.prevent='create' :model='form'><n-grid :cols='4' :x-gap='12'><n-form-item-gi label='Nome'><n-input v-model:value='form.first_name' placeholder='Mario' /></n-form-item-gi><n-form-item-gi label='Cognome'><n-input v-model:value='form.last_name' placeholder='Rossi' /></n-form-item-gi><n-form-item-gi label='Ditta'><n-input v-model:value='form.company' placeholder='Azienda S.p.A.' /></n-form-item-gi><n-form-item-gi label='Email'><n-input v-model:value='form.email' placeholder='mario@azienda.it' /></n-form-item-gi></n-grid><n-button type='primary' attr-type='submit'>Aggiungi</n-button></n-form><n-data-table :columns='cols' :data='rows' :bordered='false' /></n-space></div></template>
<script setup lang='ts'>import { ref, onMounted } from 'vue'; import { NForm, NFormItemGi, NInput, NButton, NSpace, NDataTable, NGrid } from 'naive-ui'; import api, { Employee } from '../lib/api'; const rows=ref<Employee[]>([]); const form=ref({ first_name:'', last_name:'', company:'', email:'' }); const cols=[{ title:'ID', key:'id', width:60 },{ title:'Nome', key:'first_name' },{ title:'Cognome', key:'last_name' },{ title:'Ditta', key:'company' },{ title:'Email', key:'email' }]; async function load(){ const { data }=await api.get<Employee[]>('/employees'); rows.value=data } async function create(){ await api.post('/employees', form.value); form.value={ first_name:'', last_name:'', company:'', email:'' }; await load() } onMounted(load)</script>
